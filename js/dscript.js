let docuss = [
    {
        num: 1,
        name: "Black Axe, la secte la plus meurtrière du Nigéria",
        type: "Documentaire",
        category: "Enquêtes",
        thumbnail: "https://ia601404.us.archive.org/6/items/photo_2022-07-18_12-07-29/__ia_thumb.jpg",
        source: "https://ia601501.us.archive.org/6/items/black-axe-la-secte-la-plus-meurtriere-du-nigeria-le-documentaire/Black_Axe___la_secte_la_plus_meurtri%C3%A8re_du_Nigeria_%40LE_DOCUMENTAIRE.mp4",
    },
    {
        num: 2,
        name: "Yalta, le crépuscule des géants",
        type: "Documentaire",
        category: "Histoire",
        thumbnail: "https://ia601509.us.archive.org/32/items/photo_2022-07-18_12-14-30/__ia_thumb.jpg",
        source: "https://ia801402.us.archive.org/19/items/yalta-le-crepuscule-des-geants-le-documentaire-2/Yalta%2C%20le%20cr%C3%A9puscule%20des%20g%C3%A9ants%20%40LE_DOCUMENTAIRE~2.mp4",
    },
    {
        num: 3,
        name: "Les derniers secrets d'Hitler",
        type: "Documentaire",
        category: "Histoire",
        thumbnail: "https://ia902502.us.archive.org/0/items/photo_2022-07-18_12-15-37/__ia_thumb.jpg",
        source: "https://ia601500.us.archive.org/12/items/les-derniers-secrets-d-hitler-le-documentaire/Les%20derniers%20secrets%20d%27Hitler%20%40LE_DOCUMENTAIRE.mp4",
    },
    {
        num: 4,
        name: "Avons-nous encore besoin des banques ?",
        type: "Documentaire",
        category: "Enquêtes",
        thumbnail: "https://ia902504.us.archive.org/13/items/photo_2022-07-18_12-15-10/__ia_thumb.jpg",
        source: "https://ia801408.us.archive.org/33/items/avons-nous-encore-besoin-des-banques-le-documentaire/Avons-nous%20encore%20besoin%20des%20banques%20_%20%40LE_DOCUMENTAIRE.mp4",
    },
    {
        num: 5,
        name: "Armes chimiques",
        type: "Documentaire",
        category: "Enquêtes",
        thumbnail: "https://ia601407.us.archive.org/35/items/photo_2022-07-16_09-35-09/__ia_thumb.jpg",
        source: "https://ia601502.us.archive.org/24/items/armes-chimiques-le-documentaire/Armes%20chimiques%20%40LE_DOCUMENTAIRE.mp4",
    },
    {
        num: 6,
        name: "Mobutu, Roi du Zaïre",
        type: "Documentaire",
        category: "Histoire",
        thumbnail: "https://ia601501.us.archive.org/19/items/muu_20221001/__ia_thumb.jpg",
        source: "https://ia601500.us.archive.org/19/items/mobutu-roi-du-zai-re-congo-vost-fr-belgique/MOBUTU%20ROI%20DU%20ZAI%CC%88RE%20%20%20CONGO%20%20%20VOST%20FR%20%20%20Belgique.mp4",
    },
    {
        num: 7,
        name: "Au Coeur des Témoins de Jéhovah",
        type: "Documentaire",
        category: "Enquêtes",
        thumbnail: "https://ia601507.us.archive.org/12/items/photo_2022-08-07_07-17-36/__ia_thumb.jpg",
        source: "https://ia801401.us.archive.org/4/items/au-coeur-des-temoins-de-jehovah-le-documentaire/Au%20coeur%20des%20T%C3%A9moins%20de%20J%C3%A9hovah%20%20%40LE_DOCUMENTAIRE.MP4",
    },
    {
        num: 8,
        name: "Le Mystère Satoshi : Aux Origines du Bitcoin",
        type: "Documentaire",
        category: "Histoire",
        thumbnail: "https://ia601403.us.archive.org/26/items/photo_2022-04-13_11-02-32/__ia_thumb.jpg",
        source: "https://ia601404.us.archive.org/15/items/le-mystere-satoshi-aux-origines-du-bitcoin-le-documentai/Le%20Mystere%20Satoshi%20-%20Aux%20Origines%20Du%20Bitcoin%20%40LE_DOCUMENTAI.mp4",
    },
    {
        num: 9,
        name: "Elizabeth II : un jour, une histoire",
        type: "Documentaire",
        category: "Histoire",
        thumbnail: "https://ia601408.us.archive.org/16/items/photo_2022-09-09_14-17-33/__ia_thumb.jpg",
        source: "https://ia801500.us.archive.org/16/items/1926-2022-elizabeth-ii-un-jour-une-histoire-documentaire/1926_2022_Elizabeth_II_Un_jour%2C_une_histoire_Documentaire.mp4",
    },
    {
        num: 10,
        name: "Rio De Janeiro : De l'or sous le sable",
        type: "Documentaire",
        category: "Enquêtes",
        thumbnail: "https://ia601503.us.archive.org/32/items/738dd-1e-2c-74fb-406cc-09ec-960d-2092dc/__ia_thumb.jpg",
        source: "https://ia601401.us.archive.org/12/items/rio-de-janeiro-de-lor-sous-le-sable-documentaire/Rio%20de%20Janeiro%20_%20de%20l%27or%20sous%20le%20sable%20Documentaire.mp4",
    },
    {
        num: 11,
        name: "Les Vrais Peaky Blinders",
        type: "Documentaire",
        category: "Histoire",
        thumbnail: "https://ia601502.us.archive.org/21/items/photo_2022-08-25_09-59-26/__ia_thumb.jpg",
        source: "https://ia601502.us.archive.org/25/items/les-vrais-peaky-blinders-documentaire/Les%20VRAIS%20PEAKY%20BLINDERS%20Documentaire.mp4",
    },
    {
        num: 12,
        name: "Escort Girls : Une vie dans l'ombre",
        type: "Documentaire",
        category: "Enquêtes",
        thumbnail: "https://ia601403.us.archive.org/31/items/photo_2022-10-05_14-19-42/__ia_thumb.jpg",
        source: "https://ia601505.us.archive.org/31/items/escort-girls-une-vie-dans-l-ombre-le-documentaire/ESCORT%20GIRLS%20_%20UNE%20VIE%20DANS%20L%27OMBRE%20LE_DOCUMENTAIRE.mp4",
    },
    {
        num: 13,
        name: "Argent, Voyages, Luxe : Qui sont les gigolos d'aujourd'hui ?",
        type: "Documentaire",
        category: "Enquêtes",
        thumbnail: "https://ia801402.us.archive.org/33/items/photo_2022-09-20_20-16-09/__ia_thumb.jpg",
        source: "https://ia601400.us.archive.org/8/items/argent-voyages-luxe-qui-sont-les-gigolo-daujourd/Argent%2C_voyages%2C_luxe_Qui_sont_les__Gigolo__d%27aujourd%27.mp4",
    },
];

let ordered_docuss = docuss.sort(function(a,b){
    if(a.name < b.name){
        return -1;
    }
    if(a.name > b.name){
        return 1;
    }
    return 0;
});

let categories = ["Animaux","Histoire","Enquêtes","Insolites","Nature","Sport"];

for(let i=0;i<categories.length;i++) {
    let filter = document.getElementById("filter");
    let filter_opt = document.createElement("option");

    filter_opt.setAttribute("id", "select-value");

    filter_opt.setAttribute("value", categories[i].toLowerCase());

    filter.setAttribute("onchange", "filterContent()");

    filter_opt.innerHTML = categories[i];

    filter.appendChild(filter_opt);

}

function filterContent() {
    let elements = document.querySelectorAll("#docus-box");
    let value = document.getElementById("filter").value;
    
    elements.forEach((element) => {
        if(value == 'all') {
            element.classList.remove("invisible");
        }
        else {
            if(element.classList.contains(value)) {
                element.classList.remove("invisible");
            }
            else {
              element.classList.add("invisible");
          }
        }
    });
}

const searchContent = () => {
    const searchbox = document.getElementById("search-input").value.toUpperCase();
    const listcontents = document.getElementById("docuss");
    const content = document.querySelectorAll("#docus-box");
    const nname = listcontents.getElementsByClassName("docus-title");

    for(var i=0;i<nname.length;i++) {
        let match = content[i].getElementsByClassName("docus-title")[0];

        if(match){
            let textvalue = match.textContent || match.innerHTML;

            if(textvalue.toUpperCase().indexOf(searchbox) > -1){
                content[i].style.display = "";
            }else{
                content[i].style.display = "none";
            }
        }
    }

}

window.onload = () => {
    filterContent('all');
    }

for(let i=0;i<ordered_docuss.length;i++) {
document.querySelector('#docuss').innerHTML += `
<div id="docus-box" class="docus-box ${docuss[i].category.toLowerCase()} invisible">
   <img src="${docuss[i].thumbnail}" alt="" class="docus-box-img">
   <div class="docus-box-overlay">                 
   </div>
   <div class="docus-box-text">
     <div id="btns-group" class="btns-group">
        <button id="btns-group-play${docuss[i].num}" class="btns-group-play"><i class="fa fa-play"></i></button>             
     </div>  
     <h2 class="docus-title">${docuss[i].name}</h2>
     <span class="docus-category">${docuss[i].category}</span>
   </div>
</div>`
}

let video = document.querySelector(".video-container");

for(let i=0;i<docuss.length;i++) {

    dbox = "dname" + i;
    window[dbox] = document.querySelector("#btns-group-play"+`${docuss[i].num}`);

window[dbox].addEventListener('click', () => {
   document.querySelector(".video-box").innerHTML = `
   <video id="player" controls controlsList="nodownload">
       <source src="${docuss[i].source}" />
   </video>
   <button id="close"><i class="fa fa-times"></i></button>`
   let player = document.querySelector("#player");
   let closebtn = document.querySelector("#close");
   
   video.classList.add('show');
   player.play();
   
   closebtn.addEventListener('click', () => {
       video.classList.remove('show');
       player.pause();
 });
})
};